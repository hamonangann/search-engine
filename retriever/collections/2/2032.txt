The 2nd Amendment of the U.S. Constitution was written in the age of horse and musket, where a private citizen could gain access to the same (or even better) weaponry that the state did.  Unless the opposition want to remove all barriers on gun ownership completely, no armed citizenry can seriously compete with a modern military armed with tanks, drones and precision weaponry. Popular resistance movements rely upon creating an unaffordable political cost to maintaining the occupation (e.g. The US was eventually forced from Vietnam, despite winning virtually every major battle of the war), but this assumes that the occupying power is vulnerable to that kind of pressure. An undemocratic invader or a domestic tyranny will happily slaughter dissidents with impunity (see the pre-intervention stages of the Libyan civil-war and the 2011 Syrian uprising).
